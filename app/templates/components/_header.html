<header class="bg-system shadow-lg border-b border-black/10">

    <div class="text-center py-4 px-4">
        <h1 class="text-2xl md:text-4xl font-bold text-white mb-1">CarStore</h1>
        <p class="text-sm md:text-lg text-blue-200">Compre ou anuncie o seu veículo aqui!</p>
    </div>

    <div class="border-t border-white/20 px-4 py-2 md:py-3">
        <div class="flex items-center justify-between">
            
            <!-- Navegação Desktop -->
            <nav class="hidden lg:block flex-1">
                <ul class="flex items-center gap-3 text-base">
                    {% if not user.is_authenticated %}
                        <li>
                            <a href="{% url 'register' %}" 
                               class="text-white hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10">
                                <i class="bi bi-person-plus-fill mr-1"></i>
                                Cadastre-se
                            </a>
                        </li>
                        <li class="text-white/30">|</li>
                        <li>
                            <a href="{% url 'login' %}" 
                               class="text-white hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10">
                                <i class="bi bi-box-arrow-in-right mr-1"></i>
                                Entrar
                            </a>
                        </li>
                        <li class="text-white/30">|</li>
                    {% endif %}

                    <li>
                        <a href="{% url 'cars_list' %}" 
                           class="text-white hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10">
                            <i class="bi bi-car-front-fill mr-1"></i>
                            Carros
                        </a>
                    </li>

                    {% if user.is_authenticated %}
                        <li class="text-white/30">|</li>
                        <li>
                            <a href="{% url 'new_cars_list' %}" 
                               class="text-white hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10">
                                <i class="bi bi-plus-circle-fill mr-1"></i>
                                Cadastrar carro
                            </a>
                        </li>
                    {% endif %}

                    {% if user.is_staff %}
                        <li class="text-white/30">|</li>
                        <li>
                            <a href="{% url 'admin:index' %}" 
                               target="_blank"
                               class="text-white hover:text-blue-200 transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-white/10">
                                <i class="bi bi-gear-fill mr-1"></i>
                                Admin
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </nav>

            <!-- Área do Usuário Desktop -->
            <div class="hidden lg:flex items-center gap-4">
                {% if user.is_authenticated %}
                    <p>Olá, <span class="font-semibold">{{ user.first_name|default:user.username }}!</span></p>
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" 
                                class="btn-error">
                            <i class="bi bi-box-arrow-right mr-2"></i>
                            Sair
                        </button>
                    </form>
                {% endif %}
            </div>

            <!-- Menu Mobile (Tablet e Mobile) -->
            <div class="lg:hidden ml-auto">
                <div class="drawer drawer-end">
                    <input id="mobile-menu" type="checkbox" class="drawer-toggle"/>
                    
                    <!-- Botão de abrir -->
                    <div class="drawer-content">
                        <label for="mobile-menu" class="btn btn-ghost btn-circle text-white hover:bg-white/10">
                            <i class="bi bi-list text-3xl"></i>
                        </label>
                    </div>

                    <div class="drawer-side z-50">
                        <label for="mobile-menu" aria-label="close sidebar" class="drawer-overlay"></label>
                        
                        <div class="min-h-full w-80 bg-system border-l border-white/20">
                            <!-- Cabeçalho do Menu -->
                            <div class="p-6 border-b border-white/20">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-2xl font-bold text-white">Menu</h2>
                                    <label for="mobile-menu" class="btn btn-ghost btn-sm btn-circle text-white hover:bg-white/10">
                                        <i class="bi bi-x-lg text-xl"></i>
                                    </label>
                                </div>
                                {% if user.is_authenticated %}
                                    <p class="text-sm text-blue-200">
                                        Olá, <span class="font-semibold text-white">{{ user.first_name|default:user.username }}</span>!
                                    </p>
                                {% else %}
                                    <p class="text-sm text-blue-200">Bem-vindo ao CarStore</p>
                                {% endif %}
                            </div>

                            <!-- Items do Menu -->
                            <ul class="menu p-4">
                                {% if not user.is_authenticated %}
                                    <li>
                                        <a href="{% url 'register' %}" 
                                           class="text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                            <i class="bi bi-person-plus-fill text-xl text-blue-300"></i>
                                            <span>Cadastre-se</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'login' %}" 
                                           class="text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                            <i class="bi bi-box-arrow-in-right text-xl text-blue-300"></i>
                                            <span>Entrar</span>
                                        </a>
                                    </li>
                                    <div class="divider my-2 opacity-20"></div>
                                {% endif %}

                                <li>
                                    <a href="{% url 'cars_list' %}" 
                                       class="text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                        <i class="bi bi-car-front-fill text-xl text-blue-300"></i>
                                        <span>Ver Carros</span>
                                    </a>
                                </li>

                                {% if user.is_authenticated %}
                                    <li>
                                        <a href="{% url 'new_cars_list' %}" 
                                           class="text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                            <i class="bi bi-plus-circle-fill text-xl text-green-300"></i>
                                            <span>Cadastrar Carro</span>
                                        </a>
                                    </li>
                                {% endif %}

                                {% if user.is_staff %}
                                    <li>
                                        <a href="{% url 'admin:index' %}" 
                                           target="_blank"
                                           class="text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                            <i class="bi bi-gear-fill text-xl text-purple-300"></i>
                                            <span>Admin</span>
                                        </a>
                                    </li>
                                {% endif %}

                                {% if user.is_authenticated %}
                                    <li>
                                        <form method="post" action="{% url 'logout' %}" class="w-full text-white hover:bg-white/10 rounded-lg py-3 px-4 transition-colors duration-200">
                                            {% csrf_token %}
                                            <button type="submit" 
                                                    class="w-full text-left flex items-center gap-3">
                                                <i class="bi bi-box-arrow-right text-xl text-red-300"></i>
                                                <span>Sair</span>
                                            </button>
                                        </form>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
